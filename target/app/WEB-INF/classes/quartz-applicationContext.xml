<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!-- 方式二：使用MethodInvokingJobDetailFactoryBean，任务类可以不实现Job接口，通过targetMethod指定调用方法-->    
    <!-- 定义目标bean和bean中的方法 -->  
    <bean id="rankingJob" class="com.hoolai.lepao.service.RankingService"/>  
    <bean id="airRankJob" class="com.hoolai.lepao.service.ExerciseService"/>  <!-- 乐跑Air排行榜 -->
    
    <bean id="YesterdayJobMethod" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">  
	    <property name="targetObject">  
	        <ref bean="rankingJob"/>  
	    </property>  
	    <property name="targetMethod">  <!-- 要执行的方法名称 -->  
	        <value>yesterdaySumSteps</value>  
	    </property>  
	</bean>  
	
    <bean id="beforeYesterdayJobMethod" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">  
	    <property name="targetObject">  
	        <ref bean="rankingJob"/>  
	    </property>  
	    <property name="targetMethod">  <!-- 要执行的方法名称 -->  
	        <value>beforeYesterdaySumSteps</value>  
	    </property> 
    </bean>
    
    <bean id="dropTableMethod" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">  
	    <property name="targetObject">  
	        <ref bean="rankingJob"/>  
	    </property>  
	    <property name="targetMethod">  <!-- 要执行的方法名称 -->  
	        <value>dropTable</value>  
	    </property> 
    </bean>
    
    <bean id="staticRankInfoMethod" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">  
	    <property name="targetObject">  
	        <ref bean="airRankJob"/>  
	    </property>  
	    <property name="targetMethod">  <!-- 要执行的方法名称 -->  
	        <value>staticRankInfo</value>  
	    </property> 
    </bean>
    
      
	<!-- ======================== 调度触发器 ======================== -->  
	<bean id="YesterdayCronTriggerBean" class="org.springframework.scheduling.quartz.CronTriggerBean">  
	    <property name="jobDetail" ref="YesterdayJobMethod"></property>  
	    <property name="cronExpression" value="0 2 0 ? * *"></property>  
	</bean>  
	
	<bean id="beforeYesterdayCronTriggerBean" class="org.springframework.scheduling.quartz.CronTriggerBean">  
	    <property name="jobDetail" ref="beforeYesterdayJobMethod"></property>  
	    <property name="cronExpression" value="0 5 0 ? * *"></property>  
	</bean>
	
	<bean id="dropTableCronTriggerBean" class="org.springframework.scheduling.quartz.CronTriggerBean">  
	    <property name="jobDetail" ref="dropTableMethod"></property>  
	    <property name="cronExpression" value="0 1 0 ? * *"></property>  
	</bean>
	
	<bean id="staticRankInfoCronTriggerBean" class="org.springframework.scheduling.quartz.CronTriggerBean">  
    	<property name="jobDetail" ref="staticRankInfoMethod"></property>  
    	<property name="cronExpression" value="0 0 2 ? * *"></property>  
	</bean>
	
	
	<!-- ======================== 调度工厂 ======================== -->  
	<bean id="SpringJobSchedulerFactoryBean" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">  
	    <property name="triggers">  
	        <list>  
	            <ref bean="YesterdayCronTriggerBean"/>  
	            <ref bean="beforeYesterdayCronTriggerBean"/>  
	            <ref bean="dropTableCronTriggerBean"/>  
	            <ref bean="staticRankInfoCronTriggerBean"/>  
	        </list>  
	    </property>  
	</bean>   
	

</beans>