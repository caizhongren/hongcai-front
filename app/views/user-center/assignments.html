<div class="userCenter-assignments right-area record col-md-8 col-lg-9 padding-b-30 bg-offWhite" >
  <div class="currency-style">
    <div class="title">
      <span class="tip">债权管理</span>
    </div>
    <!-- 已开通第三方资金存管账户 -->
    <div class="main" ng-show="true">
      <!-- 有购买项目 展示内容 -->
      <div ng-show="true">
        <div class="row padd margin-t-20 padding-b-30">
          <div class="col-md-11 bg-grey6 padding-t-20 padding-b-20 record-w margin-l--20 padding-l-80">
            <div class="col-xs-4 ft-14 border-right-in margin-l--10 padding-r-0">
              <p class="padding-t-10 margin-l--5">
                <i class="fa fa-jpy ft-grey margin-r-10 margin-l-8"></i>可转让：<strong class="ft-18 ft-red6">{{assignmentsCount.transferableCount || 0}}</strong>个
              </p>
              <p>
                <i class="fa fa-line-chart ft-grey margin-r-5"></i>转让中：<strong class="ft-18 ft-red6">{{assignmentsCount.transferingCount || 0}}</strong>个
              </p>
              <p>
                <i class="fa fa-usd ft-grey margin-r-10 margin-l-3"></i>已转让：<strong class="ft-18 ft-red6">{{assignmentsCount.transferedCount || 0}}</strong>个
              </p>
            </div>
            <div class="col-xs-4 ft-14 text-center padding-l-40">
              <p class="margin-t-20">转让总额（元）</p>
              <p class="margin-t-20"><strong class="ft-24 ft-red7">{{assignmentsCount.transferedAmount || 0 | number: 2}}</strong></p>
            </div>
            <div class="col-xs-4 ft-14 text-center">
              <p class="margin-t-20">转让收入（元）</p>
              <p class="margin-t-20"><strong class="ft-24 ft-red7">{{assignmentsCount.transferedIncome || 0 | number: 2}}</strong></p>
            </div>
          </div>
          <div class="col-md-1 row"></div>
        </div>
        <div class="row margin-l-0 margin-r-0 margin-t-10">
          <div class="fl col-md-12 ft-14 margin-l-24">
            <div class="col-xs-1 padding-b-5 cursor-pointer {{searchStatus == 1 ? 'credit-toggle' : ''}}" ng-click="loadAssignments(currentPage, pageSize, 1)">可转让</div>
            <div class="col-xs-1 padding-b-5 cursor-pointer {{searchStatus == 2 ? 'credit-toggle' : ''}}" ng-click="getTranferingAssignmentsList(1,6,'1,2,5')">转让中</div>
            <div class="col-xs-1 padding-b-5 cursor-pointer {{searchStatus == 3 ? 'credit-toggle' : ''}}" ng-click="getTranferingAssignmentsList(1,6,'3,4')">已转让</div>
          </div>
        </div>
        <div ng-show="searchStatus == 1">
          <table class="table margin-b-30 table-dashed margin-t-0 record-w">
            <thead>
              <tr>
                <th>项目名称</th>
                <th>持有债权(元)</th>
                <th>待收收益(元)</th>
                <th>到期时间</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-show="transferablesList.length <= 0">
                <td colspan="5">
                  <div>
                    <p class="ft-18 ft-grey margin-t-20">暂无记录</p>
                  </div>
                </td>
              </tr>
              <tr ng-repeat="item in transferablesList track by $index" ng-if="item.transferableAmount > 0">
                <td><a class="invment-blue cursor-pointer" ng-click="getPreprPojectDetails(item.projectId)"><span class="assignmentsZhuan" ng-if="item.type === 6">转</span>{{item.projectName}}<img ng-show="item.coupon" src="/images/rate-coupon.png" alt="使用加息券" class="used-rate"></a></td>
                <td>{{item.transferableAmount | number:2 || 0}}</td>
                <td>{{item.profit - item.returnProfit | number:2 || 0}}<span ng-show="item.coupon" class="ft-red7">+{{(item.baseRate + item.riseRate + item.coupon.value) * (item.profit - item.returnProfit) / (item.baseRate + item.riseRate) - (item.profit - item.returnProfit) | number:2 || 0 }}</span></td>
                <td>{{item.repaymentDate | date:'yyyy-MM-dd'}}</td>
                <td ng-if="item.canTransfer" class="cursor-pointer ft-blue0" ui-sref="root.userCenter.assignments-transfer-details({number: item.number})">转让</td>
                <td ng-if="!item.canTransfer">
                  <p class="margin-b-5">{{item.valueDate +  10*24*3600*1000 | date:'yyyy-MM-dd'}}</p>
                  <p>可转让</p>
                </td>
              </tr>
            </tbody>
          </table>

          <ul class="pager margin-r-20" ng-if="transferablesList.length > 0">
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="currentPage >= numberOfPages " ng-click="loadAssignments(currentPage+1, pageSize, searchStatus)">下一页</button></li>
            <div class="fr height-30">&nbsp;&nbsp;{{ currentPage}} / {{ numberOfPages}} &nbsp;共 {{count}} 条&nbsp;&nbsp;</div>
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="currentPage == 1" ng-click="loadAssignments(currentPage-1, pageSize, searchStatus)">上一页</button></li>
          </ul>
        </div>
        <div ng-show="searchStatus == 2">
          <table class="table table-dashed margin-b-30 margin-t-0">
            <thead>
              <tr>
                <th>项目名称</th>
                <th>发起时间</th>
                <th>转让金额(元)</th>
                <th>转让利率(%)</th>
                <th>已转让金额(元)</th>
                <th>已转让收入(元)</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-show="assignmentsList.length <= 0">
                <td colspan="7">
                  <div>
                    <p class="ft-18 ft-grey margin-t-20">暂无记录</p>
                  </div>
                </td>
              </tr>
              <tr ng-repeat="item in assignmentsList">
                <td><a class="invment-blue cursor-pointer" ng-click="getPreprPojectDetails(item.projectId)">{{item.name}}</a></td>
                <td>{{item.createTime | date:'yyyy-MM-dd'}}</td>
                <td>{{item.amount || 0 | number: 2}}</td>
                <td>{{item.annualEarnings || 0 | number: 2}}</td>
                <td>{{item.soldStock * 100 || 0 | number: 2}}</td>
                <td>{{item.transferedIncome || 0 | number: 2}}</td>
                <td>
                  <a type="button" class="ft-blue0 margin-r-5 cursor-pointer" ng-click="cancelCreditAssignment(item)">撤销</a>
                  <a type="button" class="ft-blue0 cursor-pointer" ng-click= "getAssignmentDetail(item, 1, 7)">详情</a>
                </td>
              </tr>
            </tbody>
          </table>

          <ul class="pager margin-r-20" ng-if="assignmentsList.length > 0">
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="page2 >= totalPage " ng-click="getTranferingAssignmentsList(page2+1, pageSize2, '1,2,5')">下一页</button></li>
            <div class="fr height-30">&nbsp;&nbsp;{{ page2}} / {{ totalPage}} &nbsp;共 {{total}} 条&nbsp;&nbsp;</div>
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="page2 == 1" ng-click="getTranferingAssignmentsList(page2-1, pageSize2, '1,2,5')">上一页</button></li>
          </ul>
        </div>
        <div ng-show="searchStatus == 3">
          <table class="table table-dashed margin-b-30 margin-t-0">
            <thead>
              <tr>
                <th>项目名称</th>
                <th>转让金额(元)</th>
                <th>转让利率(%)</th>
                <th>转让本金(元)</th>
                <th>转让收入(元)</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-show="assignmentsList.length <= 0">
                <td colspan="6">
                  <div>
                    <p class="ft-18 ft-grey margin-t-20">暂无记录</p>
                  </div>
                </td>
              </tr>
              <tr ng-repeat="item in assignmentsList">
                <td><a class="invment-blue cursor-pointer" ng-click="getPreprPojectDetails(item.projectId)">{{item.name}}</a></td>
                <td>{{item.amount || 0 | number: 2}}</td>
                <td>{{item.annualEarnings || 0 | number: 2}}</td>
                <td>{{item.soldStock * 100 || 0 | number: 2}}</td>
                <td>{{item.transferedIncome || 0 | number: 2}}</td>
                <td class="ft-blue0 cursor-pointer" ng-click="getAssignmentDetail(item, 1, 7)">详情</td>
              </tr>
            </tbody>
          </table> 

          <ul class="pager margin-r-20" ng-if="assignmentsList.length > 0">
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="page2 >= totalPage " ng-click="getTranferingAssignmentsList(page2+1, pageSize2, '3,4')">下一页</button></li>
            <div class="fr height-30">&nbsp;&nbsp;{{page2}} / {{ totalPage}} &nbsp;共 {{total}} 条&nbsp;&nbsp;</div>
            <li class="fr"><button class="btn btn-default btn-sm" ng-disabled="page2 == 1" ng-click="getTranferingAssignmentsList(page2-1, pageSize2, '3,4')">上一页</button></li>
          </ul> 
        </div>
      </div>
    </div>
  </div>
</div>


